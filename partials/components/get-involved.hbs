{{!--
    Get Involved component – items come from posts with a given tag.
    Each post = one card: title → card title, post body (content) → description (HTML, so links work), url → "Learn more" link.

    Usage:
        {{> "components/get-involved" }}
        {{> "components/get-involved" tagSlug="get-involved" }}

    Configure in Ghost Admin → Design → Customize → Get Involved:
        - get_involved_tag: tag slug for posts (e.g. get-involved-home-page). Posts with this tag appear as cards.
        - get_involved_heading: optional section heading (default: "Get involved with CycleWR").
    Order: by published date (oldest first). Limit 10.
    Fallback: if no tag is set, uses "get-involved-home-page" so we never pass an empty slug to #get (which would break the page).
--}}
{{!-- Resolve slug: explicit tagSlug > @custom.get_involved_tag > default "get-involved" (never pass empty to #get) --}}
{{#if tagSlug}}
    {{#get "posts" filter=(concat "tag:" tagSlug) limit="10" order="published_at asc" as |posts|}}
        {{#if posts}}{{> "components/get-involved/section" posts=posts}}{{/if}}
    {{/get}}
{{else}}
    {{#if @custom.get_involved_tag}}
        {{#get "posts" filter=(concat "tag:" @custom.get_involved_tag) limit="10" order="published_at asc" as |posts|}}
            {{#if posts}}{{> "components/get-involved/section" posts=posts}}{{/if}}
        {{/get}}
    {{else}}
        {{#get "posts" filter="tag:get-involved" limit="10" order="published_at asc" as |posts|}}
            {{#if posts}}{{> "components/get-involved/section" posts=posts}}{{/if}}
        {{/get}}
    {{/if}}
{{/if}}
